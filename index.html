<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STARTrimCommunity</title>
    <link rel="icon" type="image/x-icon" href="design/Logos/x-STARTrimlogo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&family=Suez+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="design/style.css">
    <link rel="stylesheet" href="design/CSS_files/eventcard.css">
    <link rel="stylesheet" href="design/CSS_files/footer.css">
    <link rel="stylesheet" href="design/CSS_files/teams.css">
    <link rel="stylesheet" href="design/CSS_files/media.css">
</head>
<body>

<div class="background">
    <div class="navbar">
        <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
        <header>
            <div class="menu">
                <div class="logo">
                    <a href="index.html">
                        <img src="design/Logos/startrimlogo.png" alt="STARTrim Logo" loading="lazy">
                    </a>
                </div>
                <ul>
                    <li><a href="EventsPage.html" data-translate="Events">Events</a></li>
                    <li><a href="#" id="contact-link" data-translate="CONTACT">CONTACT</a></li>
                    <li><a href="#" id="toggle-login-signup" data-translate="Login/SignUp">Login/SignUp</a></li>
                </ul>

                <div class="language-selector">
                    <select id="language-select">
                        <option value="en">English</option>
                        <option value="he">עברית</option>
                    </select>
                </div>
            </div>
        </header>

        <div id="side-menu" class="side-menu">
            <a href="javascript:void(0)" class="closebtn" onclick="toggleMenu()">&times;</a>
            <a href="EventsPage.html" data-translate="Events">Events</a>
            <a href="#" id="contact-link2" data-translate="CONTACT">CONTACT</a>
            <a href="#" id="toggle-login-signup2" data-translate="Login/SignUp">Login/SignUp</a>
            <div class="language-selector">
                <select id="language-select2">
                    <option value="en">English</option>
                    <option value="he">עברית</option>
                </select>
            </div>
        </div>

        <div class="content">
            <div class="logo-container">
                <img src="design/Logos/main farme STARTrim.png" alt="STARTrim Logo" class="main_logo">
            </div>
            <div class="content_info">
                <h1 data-translate="INNOVATION_ENTREPRENEURSHIP_TECHNOLOGY_COURSE">Welcome to STARTrim community</h1>
                <p class="par" data-translate="COMMUNITY_DESCRIPTION">
                    <br> "Description..."
                </p>
            </div>

            <div id="login-signup-container" style="display: none;">
                <div class="form">
                    <form id="login-form">
                        <input type="email" id="email" name="email" placeholder="Enter Email Here" data-translate="ENTER_EMAIL">
                        <input type="password" id="password" name="password" placeholder="Enter Password Here" data-translate="ENTER_PASSWORD">
                        <button type="submit" class="btnn" data-translate="LOGIN">Login </button>
                    </form>

                    <p data-translate="dont_have_account">Don't have an account?</p><br>
                        <a href="signup.html" data-translate="SIGN_UP">Sign up </a><a data-translate="HERE"> here</a>
                    <p class="liw" data-translate="LOGIN_WITH">Log in with</p>

                    <div class="icons">
                        <a href="#" onclick="signInWithGoogle()"><ion-icon name="logo-google"></ion-icon></a>
                    </div>
                </div>
            </div>
        </div>

        <div class="events-section">
            <h2 class="events-title" data-translate="Event_title">Our events:</h2>
            <div class="scroll-container">
                <button class="scroll-btn left" onclick="scrollLeft()">&#9664;</button>
                <div class="container scroll-1" id="events-container">
                    <!-- Dynamic events will be inserted here -->
                </div>
                <button class="scroll-btn right" onclick="scrollRight()">&#9654;</button>
            </div>
            <a href="EventsPage.html" class="more-info" data-translate="MORE_INFO">More info...</a>
        </div>

        <div class="content_comment">
            <a href="#" class="par-link scroll-link" data-target="#footer">
                <p class="par" data-translate="want_to_share_comment">
                    <br> Want to publish your comment?
                    <br> Contact us by email: startrim1213@gmail.com
                </p>
            </a>
        </div>


        <div class="card_comment">
            <div class="bar_comment"></div>
            <div class="card_form_comment">
                <img id="dynamic-image" class="comment-image" src="" alt="comments">
            </div>
            <div class="card_data_comment">
                <div class="data_comment">
                    <div class="text_comment">
                        <div class="cube text_s_comment" id="cube">
                            <label class="side front_comment" data-translate="Access the list (Topic)"></label>
                            <label class="side top_comment" data-translate="Username-id"></label>
                        </div>
                        <label class="text_d_comment" data-translate="Translation_responses"></label>
                    </div>
                </div>
            </div>
        </div>

        <section class="partners">
            <h2 class="partners-title" data-translate="partners-title">Our Partners:</h2>
            <div class="partners-container">
                <button class="scroll-button prev-button" disabled>&#9664;</button>
                <div class="partner">
                    <img src="design/Partners logo/aws logo.png" alt="Partner 1" loading="lazy">
                </div>
                <div class="partner">
                    <img src="design/Partners logo/TEENK logo.png" alt="Partner 2" loading="lazy">
                </div>
                <div class="partner">
                    <img src="design/Partners logo/gav-yam_logo.png" alt="Partner 3" loading="lazy">
                </div>
                <div class="partner">
                    <img src="design/Partners logo/technion_logo.png" alt="Partner 4" loading="lazy">
                </div>
                <div class="partner">
                    <img src="design/Partners logo/microsoft logo.png" alt="Partner 5" loading="lazy">
                </div>
                <div class="partner" style="display:none;">
                    <img src="design/Partners logo/MIXER logo.png" alt="Partner 6" loading="lazy">
                </div>
                <div class="partner" style="display:none;">
                    <img src="design/Partners logo/the_innovation logo.png" alt="Partner 7" loading="lazy">
                </div>
                <div class="partner" style="display:none;">
                    <img src="design/Partners logo/Herzliya logo.png" alt="Partner 8" loading="lazy">
                </div>
                <div class="partner" style="display:none;">
                    <img src="design/Partners logo/tech4ed logo.png" alt="Partner 9" loading="lazy">
                </div>
                <button class="scroll-button next-button">&#9654;</button>
            </div>
        </section>

        <footer class="footer" id="footer">
            <div class="footer-wave">
                <svg viewBox="0 0 1440 300" style="transform: rotate(180deg); transform-origin: center;">
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#732dab; stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#6a0dad; stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#cc55ed; stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path fill="url(#gradient)" d="M0,200C60,180,120,120,180,140C240,160,300,220,360,200C420,180,480,80,540,80C600,80,660,180,720,180C780,180,840,120,900,140C960,160,1020,220,1080,220C1140,220,1200,160,1260,140C1320,120,1380,180,1440,160L1440,320L0,320Z"></path>
                </svg>
            </div>
            <div class="footer-content">
                <p class="par" data-translate="Contact">
                    <br> The "STARTrim" community brings together young men and women from all over the country
                </p>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <div class="social-media">
                        <div class="social-item" onclick="openSocialWindow('https://www.instagram.com/startrim_community/')">
                            <img src="design/Logos/instagram.png" alt="Instagram" class="social-icon">
                            <span class="social-text" data-translate="instagram_community">Community Instagram</span>
                        </div>
                        <div class="social-item" onclick="openSocialWindow('https://www.tiktok.com/@startrim.community?_t=8nzFVhB6T13&_r=1')">
                            <img src="design/Logos/tiktok.png" alt="TikTok" class="social-icon">
                            <span class="social-text" data-translate="tiktok_community">Community TikTok</span>
                        </div>
                        <div class="social-item" onclick="openSocialWindow('https://www.linkedin.com/company/startrim')">
                            <img src="design/Logos/linkedin.png" alt="LinkedIn" class="social-icon">
                            <span class="social-text" data-translate="linkedin_community">Community LinkedIn</span>
                        </div>
                        <div class="social-item" onclick="toggleContactPopup()">
                            <img src="design/Logos/mobile-phones.png" alt="Contact us" class="social-icon">
                            <span class="social-text" data-translate="contact_us">Contact Us</span>
                        </div>
                        <div id="contactUsContainer" style="display: none;"></div>
                        <div class="join-us">
                            <a href="signup.html" class="join-button" data-translate="join_us">Join Us Now</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal" style="display: none;">
                <article class="modal-container">
                    <header class="modal-container-header">
                        <span class="modal-container-title">
                            <svg aria-hidden="true" height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M14 9V4H5v16h6.056c.328.417.724.785 1.18 1.085l1.39.915H3.993A.993.993 0 0 1 3 21.008V2.992C3 2.455 3.449 2 4.002 2h10.995L21 8v1h-7zm-2 2h9v5.949c0 .99-.501 1.916-1.336 2.465L16.5 21.498l-3.164-2.084A2.953 2.953 0 0 1 12 16.95V11zm2 5.949c0 .316.162.614.436.795l2.064 1.36 2.064-1.36a.954.954 0 0 0 .436-.795V13h-5v3.949z" fill="currentColor"></path>
                            </svg>
                            Terms and Services
                        </span>
                        <button class="icon-button">
                            <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z" fill="currentColor"></path>
                            </svg>
                        </button>
                    </header>
                    <section class="modal-container-body rtf" id="MODAL_CONTENT" data-translate="MODAL_CONTENT">
                        <span>Your consent to our use of cookies.....</span>
                    </section>
                    <footer class="modal-container-footer">
                        <button class="button is-ghost">Decline</button>
                        <button class="button is-primary">Accept</button>
                    </footer>
                </article>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 STARTrimCommunity. All rights reserved. | <a id="terms-link">Terms of Service</a></p>
                <p>Created by Avital Gladkih</p>
            </div>
        </footer>

    </div>
</div>

<script type="module" src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="807118098633-d61d9q5sn9bn4pr1s3kn6hloqgbivli1.apps.googleusercontent.com"
      content="807118098633-bpclon7bnhbspvg9n43c2vksb3s7un0f.apps.googleusercontent.com">
<script src="java script/Partners-scroll.js"></script>
<script src="java script/toggleMenu.js"></script>
<script src="java script/Terms agree.js"></script>
<script>
    function openSocialWindow(url) {
        window.open(url, '_blank', 'width=600,height=400,menubar=no,toolbar=no,resizable=yes,scrollbars=yes');
    }

    function alignContentCenter() {
        document.querySelectorAll('.content').forEach(content => {
            content.style.marginLeft = 'auto';
            content.style.marginRight = 'auto';
            content.style.textAlign = 'center';
        });
    }

    function toggleContactPopup() {
        const contactUsContainer = document.getElementById('contactUsContainer');
        const selectedLanguage = localStorage.getItem('preferredLanguage') || 'en';

        fetch('Data/Language/' + selectedLanguage + '.json')
            .then(response => response.json())
            .then(data => {
                if (contactUsContainer.style.display === 'block') {
                    contactUsContainer.style.display = 'none';
                } else {
                    contactUsContainer.innerHTML = `
                        <h1>${data.contact_us}</h1>
                        <h2>${data.contact_name}</h2>
                        <p>${data.contact_phone}</p>
                        <p>${data.contact_email}</p>
                    `;
                    contactUsContainer.style.display = 'block';
                }
            })
            .catch(error => console.error('Error fetching language file:', error));
    }
    const container = document.querySelector('.container');

    container.addEventListener('wheel', function (event) {
        if (event.deltaY !== 0) {
            event.preventDefault();
            container.scrollLeft += event.deltaY;
        }
    });

    function checkHeaderPosition() {
        const header = document.querySelector('header');
        const mainLogo = document.querySelector('.main_logo');
        const logoRect = mainLogo.getBoundingClientRect();
        const headerRect = header.getBoundingClientRect();

        if (headerRect.top < logoRect.bottom && headerRect.bottom > logoRect.top) {
            header.classList.add('header-on-logo');
            header.classList.remove('header-off-logo');
        } else {
            header.classList.add('header-off-logo');
            header.classList.remove('header-on-logo');
        }
    }

    window.addEventListener('scroll', checkHeaderPosition);
    document.addEventListener('DOMContentLoaded', checkHeaderPosition);

    document.addEventListener("DOMContentLoaded", function() {
        const toggleButton = document.getElementById("toggle-login-signup");
        const loginSignupContainer = document.getElementById("login-signup-container");

        toggleButton.addEventListener("click", function(event) {
            event.preventDefault();
            if (loginSignupContainer.style.display === "none") {
                loginSignupContainer.style.display = "block";
                scrollToElement(loginSignupContainer, 380);
            } else {
                loginSignupContainer.style.display = "none";
            }
        });

        const toggleButton2 = document.getElementById("toggle-login-signup2");
        toggleButton2.addEventListener("click", function(event) {
            event.preventDefault();
            if (loginSignupContainer.style.display === "none") {
                loginSignupContainer.style.display = "block";
                scrollToElement(loginSignupContainer, 160);
            } else {
                loginSignupContainer.style.display = "none";
            }
        });
    });

    function scrollToElement(element, offset) {
        const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
        const offsetPosition = elementPosition - offset;

        window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
        });
    }

    function scrollToElement2(element, offset) {
        const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;
        const offsetPosition = elementPosition + offset;
        window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
        });
    }

    document.getElementById('contact-link').addEventListener('click', function(event) {
        event.preventDefault();
        const footer = document.getElementById('footer');
        scrollToElement2(footer, 100);
    });

    document.getElementById('contact-link2').addEventListener('click', function(event) {
        event.preventDefault();
        const footer = document.getElementById('footer');
        scrollToElement2(footer, 50);
    });

    document.querySelectorAll('.scroll-link').forEach(link => {
        link.addEventListener('click', function(event) {
            event.preventDefault();
            const targetSelector = link.getAttribute('data-target');
            const targetElement = document.querySelector(targetSelector);
            if (targetElement) {
                scrollToElement2(targetElement, 100);
            }
        });
    });

    document.querySelectorAll('#language-select, #language-select2').forEach(select => {
        select.addEventListener('change', function () {
            let selectedLanguage = this.value;
            changeLanguage(selectedLanguage);
            localStorage.setItem('preferredLanguage', selectedLanguage);
        });
    });

    function changeLanguage(selectedLanguage) {
        fetch('Data/Language/' + selectedLanguage + '.json')
            .then(response => response.json())
            .then(data => {
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (data[key]) {
                        if (element.hasAttribute('placeholder')) {
                            element.setAttribute('placeholder', data[key]);
                        } else {
                            element.innerHTML = data[key];
                        }
                    }
                });
                updateTextDirection(selectedLanguage);
            })
            .catch(error => console.error('Error fetching language file:', error));
    }

    document.addEventListener('DOMContentLoaded', function () {
        const preferredLanguage = localStorage.getItem('preferredLanguage');
        if (preferredLanguage) {
            document.querySelectorAll('#language-select, #language-select2').forEach(select => {
                select.value = preferredLanguage;
            });
            changeLanguage(preferredLanguage);
        } else {
            const defaultLanguage = document.getElementById('language-select').value;
            changeLanguage(defaultLanguage);
        }
    });

    function containsHebrewText(text) {
        const hebrewRegex = /[\u0590-\u05FF\uFB1D-\uFB4F]/;
        return hebrewRegex.test(text);
    }

    function updateTextDirection(language) {
        if (language === 'he') {
            document.documentElement.setAttribute('dir', 'rtl');
        } else {
            document.documentElement.setAttribute('dir', 'ltr');
        }
    }

    function alignContentCenter() {
        document.querySelectorAll('.content').forEach(content => {
            content.style.marginLeft = 'auto';
            content.style.marginRight = 'auto';
            content.style.textAlign = 'center';
        });
    }


    function directSignIn(email) {
        setUserDataInCookie(email);
        window.location.href = 'STARTrimHOME.html';
    }

    function signInWithGoogle() {
        gapi.load('auth2', function () {
            const auth2 = gapi.auth2.init({
                client_id: '807118098633-d61d9q5sn9bn4pr1s3kn6hloqgbivli1.apps.googleusercontent.com',
                cookiepolicy: 'single_host_origin'
            });

            auth2.signIn().then(function (googleUser) {
                const profile = googleUser.getBasicProfile();
                const email = profile.getEmail();

                fetchDataFromGoogleSheet().then(function(data) {
                    const rowIndex = findRowByEmail(email, data);
                    if (rowIndex !== -1) {
                        setUserDataInCookie(email);
                        window.location.href = 'STARTrimHOME.html';
                    } else {
                        directSignIn(email);
                    }
                }).catch(function(error) {
                    console.error('Error fetching data:', error);
                });
            }, function (error) {
                console.log(error);
            });
        });
    }

    async function fetchDataFromGoogleSheet() {
        try {
            const response = await fetch('https://sheets.googleapis.com/v4/spreadsheets/1WrsrKtGqjdwbaL20Cs7TmScQNVp5kJRKcN0P6wHmdko/values/signupSTARTrim-form!A:J?key=AIzaSyAYSge_Rg_xblZbyj9vHdhMJzZOrGFylqI');
            if (!response.ok) {
                throw new Error('Failed to fetch data');
            }
            const data = await response.json();
            return data.values;
        } catch (error) {
            console.error('Error fetching data:', error.message);
            return null;
        }
    }

    function findRowByEmail(email, data) {
        if (!data) return -1;

        for (let i = 0; i < data.length; i++) {
            const row = data[i];
            if (row[0] === email) {
                return i + 1;
            }
        }
        return -1;
    }

    function setUserDataInCookie(username) {
        document.cookie = "username=" + username + ";path=/";
    }

    function getUserDataFromCookie() {
        const name = "username=";
        const decodedCookie = decodeURIComponent(document.cookie);
        const cookieArray = decodedCookie.split(';');
        for (let i = 0; i < cookieArray.length; i++) {
            let cookie = cookieArray[i];
            while (cookie.charAt(0) == ' ') {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(name) == 0) {
                return cookie.substring(name.length, cookie.length);
            }
        }
        return "";
    }


    document.getElementById('login-form').addEventListener('submit', async function (event) {
        event.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        const data = await fetchDataFromGoogleSheet();
        const rowIndex = findRowByEmail(email, data);

        if (rowIndex !== -1) {
            const row = data[rowIndex - 1];
            const storedEmail = row[0];
            const storedPassword = row[3];

            if (email === storedEmail && password === storedPassword) {
                setUserDataInCookie(email);
                window.location.href = 'STARTrimHOME.html';
            } else {
                alert('Incorrect email or password. Please try again.');
            }
        } else {
            alert('Incorrect email or password. Please try again.');
        }
    });

    document.addEventListener("DOMContentLoaded", function() {
        fetch('Data/events_info.json')
            .then(response => response.json())
            .then(events => {
                const container = document.getElementById('events-container');
                const language = localStorage.getItem('preferredLanguage') || 'en';

                events.forEach(event => {
                    const card = document.createElement('div');
                    card.classList.add('card');

                    const cardImage = document.createElement('div');
                    cardImage.classList.add('card__image');
                    cardImage.setAttribute('data-title', event.title);
                    const img = document.createElement('img');
                    img.src = event.image;
                    cardImage.appendChild(img);

                    const cardContent = document.createElement('div');
                    cardContent.classList.add('card__content');
                    const cardTitle = document.createElement('p');
                    cardTitle.classList.add('card__title');
                    cardTitle.textContent = event.title;

                    const cardDescribe = document.createElement('p');
                    cardDescribe.classList.add('card__describe');

                    const description = event.shortDescription[language] || event.shortDescription['en'];
                    cardDescribe.textContent = description || 'Description not available';

                    cardContent.appendChild(cardTitle);
                    cardContent.appendChild(cardDescribe);
                    card.appendChild(cardImage);
                    card.appendChild(cardContent);

                    container.appendChild(card);
                });
            })
            .catch(error => console.error('Error fetching events:', error));
    });

    document.addEventListener("DOMContentLoaded", function() {
        fetch('Data/Comments_info.json')
            .then(response => response.json())
            .then(imagesData => {
                let currentImageIndex = 0;
                const dynamicImage = document.getElementById("dynamic-image");
                const usernameElement = document.querySelector('.side.top_comment');
                const descriptionElement = document.querySelector('.text_d_comment');
                let interval;

                function changeImage() {
                    const language = localStorage.getItem('preferredLanguage') || 'en';
                    dynamicImage.classList.add('fade');
                    setTimeout(() => {
                        dynamicImage.src = imagesData[currentImageIndex].imageUrl;
                        usernameElement.textContent = imagesData[currentImageIndex].username[language];
                        descriptionElement.textContent = imagesData[currentImageIndex].description[language];
                        currentImageIndex = (currentImageIndex + 1) % imagesData.length;
                        dynamicImage.classList.remove('fade');
                    }, 600);
                }

                function startImageRotation() {
                    interval = setInterval(changeImage, 6000);
                }

                dynamicImage.addEventListener('mouseenter', () => clearInterval(interval));
                dynamicImage.addEventListener('mouseleave', startImageRotation);

                changeImage();
                startImageRotation();
            })
            .catch(error => console.error('Error fetching images:', error));
    });

    document.querySelector('.scroll-btn.left').addEventListener('click', () => {
        document.getElementById('events-container').scrollBy({ left: -300, behavior: 'smooth' });
    });

    document.querySelector('.scroll-btn.right').addEventListener('click', () => {
        document.getElementById('events-container').scrollBy({ left: 300, behavior: 'smooth' });
    });

</script>
</body>
</html>
