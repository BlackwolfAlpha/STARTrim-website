<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STARTERIMCommunity</title>
    <link rel="icon" type="image/x-icon" href="design/Logos/x-STARTrimlogo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&family=Suez+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="design/style.css">
    <link rel="stylesheet" href="design/CSS_files/Blogs-page.css">
    <link rel="stylesheet" href="design/CSS_files/footer.css">
    <link rel="stylesheet" href="design/CSS_files/media.css">
</head>
<body>

<div class="background">
    <div class="navbar">
        <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
        <header>
            <div class="menu">
                <div class="logo">
                    <a href="index.html">
                        <img src="design/Logos/Main Logo Light.png" alt="STARTrim Logo" loading="lazy">
                    </a>
                </div>
                <ul>
                    <li><a href="EventsPage.html" data-translate="Events">Events</a></li>
                    <li><a href="index.html" data-translate="HOME">HOME</a></li>
                    <li><a href="learning page.html" data-translate="Content repository">Content repository</a></li>
                </ul>
                <div class="language-selector">
                    <select id="language-select">
                        <option value="en">English</option>
                        <option value="he">עברית</option>
                    </select>
                </div>
            </div>
        </header>

        <div id="side-menu" class="side-menu">
            <div class="side-header">
                <div class="side-logo">
                    <a href="index.html">
                        <img src="design/Logos/Main Logo Light.png" alt="STARTrim Logo" loading="lazy">
                    </a>
                </div>
                <a href="javascript:void(0)" class="closebtn" onclick="toggleMenu()">&times;</a>
            </div>
            <div class="side-main">
                <a href="EventsPage.html" data-translate="Events">Events</a>
                <a href="index.html" data-translate="HOME">HOME</a>
                <div class="language-selector">
                    <select id="language-select2" onchange="changeLanguage(this.value)">
                        <option value="en">English</option>
                        <option value="he">עברית</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <section class="Blogs-top">
        <div class="Blogs-header">
            <h2 class="Blogs-main-title" data-translate="Blogs-main_title"></h2>
            <p class="unBlogs-title" data-translate="unBlogs_title"></p>
        </div>
    </section>

    <section class="Blogs-page-content">
        <div class="Blogs-filter">
            <label class="Blogs-filter-by" data-translate="Blogs-filter-by"></label>
            <label class="Blogs-filter-by-Content-type" data-translate="Blogs-filter-by-Content-type"></label>

            <!-- Filter Buttons -->
            <button class="filter-button" data-category="all">All</button>
            <button class="filter-button" data-category="AI">AI</button>
            <button class="filter-button" data-category="economy">economy</button>
            <button class="filter-button" data-category="Youth_projects">Youth projects</button>
        </div>

        <div class="Blogs-view-list">
            <section class="AI_blogs">
                <div class="AI_blogs-slides">
                    <!-- More cards can be added similarly -->
                </div>
            </section>

            <section class="economy_blogs">
                <div class="economy_blogs-slides">
                    <!-- More cards can be added similarly -->
                </div>
            </section>

            <section class="Youth_projects_Class">
                <div class="Youth_projects-slides">
                    <!-- More cards can be added similarly -->
                </div>
            </section>
        </div>
    </section>

    <div id="blog-details" class="detail-section" style="display: none;">
        <button class="close-button" onclick="hideBlogDetail()">Close</button>
        <div id="blog-detail-content">
            <img id="blog-detail-image" alt="Blog Main Image">
            <img id="blog-detail-author-image" alt="Author Image" style="display: none;">
            <span id="blog-detail-author"></span>
            <h2 id="blog-detail-title"></h2>
            <span id="blog-detail-duration"></span>
            <div id="blog-detail-description"></div>
        </div>
    </div>


    <section class="Blogs-end">
        <svg viewBox="0 0 1440 300" style="transform: translateY(10px);">
            <defs>
                <linearGradient id="gradient" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" style="stop-color:#9526c9; stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#6a009d; stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#671090; stop-opacity:1" />
                </linearGradient>
            </defs>
            <path fill="url(#gradient)" d="M0,200C60,180,120,120,180,140C240,160,300,220,360,200C420,180,480,80,540,80C600,80,660,180,720,180C780,180,840,120,900,140C960,160,1020,220,1080,220C1140,220,1200,160,1260,140C1320,120,1380,180,1440,160L1440,320L0,320Z"></path>
        </svg>
    </section>

    <footer class="footer" id="footer">
        <div class="footer-wave">
            <!--under svg(svg2) -->
            <svg viewBox="0 0 1440 300" style="transform: rotate(180deg); transform-origin: center;">
                <defs>
                    <linearGradient id="gradient" x1="0%" y1="100%" x2="0%" y2="0%">
                        <stop offset="0%" style="stop-color:#9526c9; stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#6a009d; stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#671090; stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path fill="url(#gradient)" d="M0,200C60,180,120,120,180,140C240,160,300,220,360,200C420,180,480,80,540,80C600,80,660,180,720,180C780,180,840,120,900,140C960,160,1020,220,1080,220C1140,220,1200,160,1260,140C1320,120,1380,180,1440,160L1440,320L0,320Z"></path>
            </svg>
        </div>
        <div class="footer-content">
            <p class="par" data-translate="Contact">
                <br> The "STARTrim" community brings together young men and women from all over the country
            </p>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <div class="social-media">
                    <div class="social-item" onclick="openSocialWindow('https://www.instagram.com/startrim_community/')">
                        <img src="design/Logos/instagram.png" alt="Instagram" class="social-icon">
                        <span class="social-text" data-translate="instagram_community">Community Instagram</span>
                    </div>
                    <div class="social-item" onclick="openSocialWindow('https://www.tiktok.com/@startrim.community?_t=8nzFVhB6T13&_r=1')">
                        <img src="design/Logos/tiktok.png" alt="TikTok" class="social-icon">
                        <span class="social-text" data-translate="tiktok_community">Community TikTok</span>
                    </div>
                    <div class="social-item" onclick="openSocialWindow('https://www.linkedin.com/company/startrim')">
                        <img src="design/Logos/linkedin.png" alt="LinkedIn" class="social-icon">
                        <span class="social-text" data-translate="linkedin_community">Community LinkedIn</span>
                    </div>
                    <div class="join-us">
                        <a href="signup.html" class="join-button" data-translate="join_us">Join Us Now</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" style="display: none;">
            <article class="modal-container">
                <header class="modal-container-header">
                    <span class="modal-container-title">
                        <svg aria-hidden="true" height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M14 9V4H5v16h6.056c.328.417.724.785 1.18 1.085l1.39.915H3.993A.993.993 0 0 1 3 21.008V2.992C3 2.455 3.449 2 4.002 2h10.995L21 8v1h-7zm-2 2h9v5.949c0 .99-.501 1.916-1.336 2.465L16.5 21.498l-3.164-2.084A2.953 2.953 0 0 1 12 16.95V11zm2 5.949c0 .316.162.614.436.795l2.064 1.36 2.064-1.36a.954.954 0 0 0 .436-.795V13h-5v3.949z" fill="currentColor"></path>
                        </svg>
                        Terms and Services
                    </span>
                    <button class="icon-button">
                        <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z" fill="currentColor"></path>
                        </svg>
                    </button>
                </header>
                <section class="modal-container-body rtf" id="MODAL_CONTENT" data-translate="MODAL_CONTENT">
                    <span>Your consent to our use of cookies.....</span>
                </section>
            </article>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 STARTERIM Community. All rights reserved. | <a id="terms-link">Terms of Service</a></p>
            <p>Created by <a href="https://www.instagram.com/black_wolfalpha1/" target="_blank">Avital Gladkih</a></p>
        </div>
    </footer>
</div>

<script type="module" src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="807118098633-d61d9q5sn9bn4pr1s3kn6hloqgbivli1.apps.googleusercontent.com"
      content="807118098633-bpclon7bnhbspvg9n43c2vksb3s7un0f.apps.googleusercontent.com">
<script src="java script/toggleMenu.js"></script>
<script src="java script/STARTup_levels-info.js"></script>
<script>
    function openSocialWindow(url) {
        window.open(url, '_blank', 'width=600,height=400,menubar=no,toolbar=no,resizable=yes,scrollbars=yes');
    }

    document.querySelectorAll('#language-select, #language-select2').forEach(select => {
        select.addEventListener('change', function () {
            const selectedLanguage = this.value;
            changeLanguage(selectedLanguage);
            localStorage.setItem('preferredLanguage', selectedLanguage);
            location.reload();
        });
    });

    function changeLanguage(selectedLanguage) {
        fetch(`Data/Language/${selectedLanguage}.json`)
            .then(response => response.json())
            .then(data => {
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (data[key]) {
                        if (element.hasAttribute('placeholder')) {
                            element.setAttribute('placeholder', data[key]);
                        } else {
                            element.innerHTML = data[key];
                        }
                    }
                });
                updateTextDirection(selectedLanguage);
            })
            .catch(error => console.error('Error fetching language file:', error));
    }

    document.addEventListener('DOMContentLoaded', function () {
        const preferredLanguage = localStorage.getItem('preferredLanguage') || 'en';
        document.querySelectorAll('#language-select, #language-select2').forEach(select => {
            select.value = preferredLanguage;
        });
        changeLanguage(preferredLanguage);
    });

    function updateTextDirection(language) {
        document.documentElement.setAttribute('dir', language === 'he' ? 'rtl' : 'ltr');
    }

    async function fetchBlogData() {
        try {
            const response = await fetch('Data/blogs.json');
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const blogsData = await response.json();
            createBlogElements(blogsData);
        } catch (error) {
            console.error('Error fetching the blog data:', error);
        }
    }
    fetchBlogData();

    function createBlogElements(blogsData) {
        const aiBlogsContainer = document.querySelector('.AI_blogs-slides');
        const economyBlogsContainer = document.querySelector('.economy_blogs-slides');
        const youthProjectsContainer = document.querySelector('.Youth_projects-slides');

        aiBlogsContainer.innerHTML = '';
        economyBlogsContainer.innerHTML = '';
        youthProjectsContainer.innerHTML = '';

        blogsData.AI_blogs.forEach(blog => {
            const blogElement = createBlogElement(blog);
            aiBlogsContainer.appendChild(blogElement);
        });

        blogsData.economy_blogs.forEach(blog => {
            const blogElement = createBlogElement(blog);
            economyBlogsContainer.appendChild(blogElement);
        });

        blogsData.Youth_projects.forEach(blog => {
            const blogElement = createBlogElement(blog);
            youthProjectsContainer.appendChild(blogElement);
        });
    }

    function createBlogElement(blog) {
        const preferredLanguage = localStorage.getItem('preferredLanguage') || 'en';
        const title = blog.title[preferredLanguage];
        const shortDescription = blog.shortDescription[preferredLanguage];
        const author = blog.author[preferredLanguage];
        const duration = blog.duration ? blog.duration[preferredLanguage] : '';
        const tag = blog.tag[preferredLanguage];
        const blogId = blog.id;

        const blogElement = document.createElement('div');
        blogElement.classList.add('blog-item');
        blogElement.innerHTML = `
            <a href="Blogs-page.html?category=AI&id=${blogId}" class="blog-link" data-title="${title}" data-author="${author}" data-duration="${duration}">
                <img src="${blog.imageUrl}" alt="${title}" />
                <h3>${title}</h3>
                <p>${shortDescription || 'No description available.'}</p>
                <span>${author} - ${duration}</span>
                <span>${tag}</span>
            </a>
        `;

        blogElement.querySelector('.blog-link').addEventListener('click', (event) => {
            event.preventDefault();
            showBlogDetail(blog);
        });

        return blogElement;
    }

    function showBlogDetail(blog) {
        const preferredLanguage = localStorage.getItem('preferredLanguage') || 'en';

        const blogImage = document.getElementById('blog-detail-image');
        if (blog.imageUrl) {
            blogImage.src = blog.imageUrl;
            blogImage.alt = blog.title[preferredLanguage];
            blogImage.style.display = 'block';
        } else {
            blogImage.style.display = 'none';
        }

        document.getElementById('blog-detail-title').innerText = blog.title[preferredLanguage];
        document.getElementById('blog-detail-author').innerText = `${blog.author[preferredLanguage]}`;
        document.getElementById('blog-detail-duration').innerText = `${blog.duration ? blog.duration[preferredLanguage] : ''}`;

        const authorImage = blog.authorImage;
        const authorImageElement = document.getElementById('blog-detail-author-image');

        console.log("Author image:", authorImage);
        console.log("Author image element:", authorImageElement);

        if (authorImage && authorImageElement) {
            authorImageElement.src = authorImage;
            authorImageElement.alt = `${blog.author[preferredLanguage]}'s image`;
            authorImageElement.style.display = 'block';
        } else {
            console.log("Author image not found or image element not available.");
            authorImageElement.style.display = 'none';
        }

        const blogDetailContainer = document.getElementById('blog-detail-description');
        blogDetailContainer.innerHTML = blog.longDescription && blog.longDescription[preferredLanguage]
            ? blog.longDescription[preferredLanguage]
            : '<p>No detailed description available.</p>';

        document.getElementById('blog-details').style.display = 'block';
        document.body.classList.add('no-scroll');

        const currentURL = new URL(window.location.href);
        currentURL.searchParams.set('id', blog.id);
        history.replaceState(null, '', currentURL.toString());
    }

    function hideBlogDetail() {
        document.getElementById('blog-details').style.display = 'none';
        document.body.classList.remove('no-scroll');

        const currentURL = new URL(window.location.href);
        currentURL.searchParams.delete('id');
        history.replaceState(null, '', currentURL.toString());
    }


    function filterBlogs(category) {
        const allSections = document.querySelectorAll('.Blogs-view-list section');

        allSections.forEach(section => {
            if (category === 'all') {
                section.style.display = 'block';
            } else {
                if (section.classList.contains(category + '_blogs') || section.classList.contains(category + '_Class')) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            }
        });
    }

    const filterButtons = document.querySelectorAll('.filter-button');
    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            const category = button.getAttribute('data-category');
            filterBlogs(category);
        });
    });

    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const category = urlParams.get('category');

        if (category) {
            filterBlogs(category);
        } else {
            filterBlogs('all');
        }
    });

    async function loadBlogById() {
        const urlParams = new URLSearchParams(window.location.search);
        const blogId = urlParams.get('id');

        if (!blogId) {
            console.error('Blog ID is missing');
            return;
        }

        try {
            const response = await fetch('Data/blogs.json');
            const blogsData = await response.json();

            const blog = findBlogById(blogId, blogsData);

            if (blog) {
                showBlogDetail(blog);
            } else {
                console.error('Blog not found');
            }
        } catch (error) {
            console.error('Error fetching the blog data:', error);
        }
    }

    function findBlogById(blogId, blogsData) {
        for (const category in blogsData) {
            const blog = blogsData[category].find(b => b.id === blogId);
            if (blog) return blog;
        }
        return null;
    }

    loadBlogById();
</script>
</body>
</html>
